<odoo>
  <data>
    <record model="ir.ui.view" id="product_template_form_view_inherited">
        <field name="name">product.template.common.form.inherit</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_form_view"/>
        <field name="arch" type="xml">
            <data>
                <xpath
                    expr="//form//sheet" 
                    position="before">
                        <button type="object" name="foodcost_calculation" string="Calcul coût de revient"/>
                </xpath>
                <xpath
                    expr="//div[@name='options']"
                    position="inside">
                        <div>
                            <field name="product_cook"/>
                            <label for="product_cook"/>
                        </div>
                </xpath>
                <xpath expr="//field[@name='standard_price']"
                position="replace">
                <field name="foodcost" string="Foodcost"/>
                
                </xpath>
                <xpath
                    expr="//field[@name='uom_po_id']"
                    position="after">
                    <field name="unit_of_reference"/>
                    <field name="unit_of_sale"/>
                    <field name="unit_of_purchase"/>
                    <field name="unit_of_cooking"/>
                    <field name="unit_of_inventory_1"/>

                    <field name="unit_of_inventory_2"/>
                    <field name="unit_of_inventory_3"/>
r
                    <field name="reference_eq_cooking" invisible="1"/>
                    <field name="reference_eq_sale" invisible="1"/>
                    <field name="reference_eq_purchase" invisible="1"/>
                    <field name="reference_eq_inv1" invisible="1"/>
                    <field name="reference_eq_inv2" invisible="1"/>
                    <field name="reference_eq_inv3" invisible="1"/>


                </xpath>
            </data>
	

            <notebook position="inside">
                <page string="Conversion de quantité">

                <div id="conversion_purchase" class="o_row d-flex" name="conversion purchase" attrs="{'invisible': [('reference_eq_purchase','=',True)]}">

                        <span>Conversion unité tarifaire d'achat : </span>

                        <field name="conversion_purchase_purchase_quantity" class="oe_inline" colspan="6"/>
                        <field name="conversion_purchase_purchase_unit" class="oe_inline" colspan="6" readonly = "1"/>
                        <span>est égal à</span>
                        <field name="conversion_purchase_reference_quantity"  class="oe_inline"/>
                        <field name="conversion_purchase_reference_unit" readonly="1"/>

                    </div>
                    <newline/>
                    <div id="conversion_sale" class="o_row d-flex" name="conversion sale" attrs="{'invisible': [('reference_eq_sale','=',True)]}">
                        <span>Conversion unité de vente : </span>

                        <field name="conversion_sale_sale_quantity" class="oe_inline" colspan="6"/>
                        <field name="conversion_sale_sale_unit" class="oe_inline" colspan="6" readonly = "1"/>
                        <span>est égal à</span>
                        <field name="conversion_sale_reference_quantity"  class="oe_inline"/>
                        <field name="conversion_sale_reference_unit" readonly="1"/>

                    </div>
                    <newline/>
                    <div id="conversion_cook" class="o_row d-flex" name="conversion cook" attrs="{'invisible': [('reference_eq_cooking','=',True)]}">
                        <span>Conversion unité de préparation : </span>
                        <field name="conversion_cook_cook_quantity" class="oe_inline" colspan="6" 
                               attrs="{'readonly': [('unit_of_cooking', '==', 'unit_of_reference')]}" />
                        <field name="conversion_cook_cook_unit" class="oe_inline" colspan="6" readonly = "1"/>
                        <span>est égal à</span>
                        <field name="conversion_cook_reference_quantity"  class="oe_inline"/>
                        <field name="conversion_cook_reference_unit" readonly="1"/>
                    </div>
                    <newline/>
                    <div id="conversion_inventory1" class="o_row d-flex" name="conversion inventory1" attrs="{'invisible': [('reference_eq_inv1','=',True)]}">
                        <span>Conversion unité d'inventaire 1 : </span>
                        <field name="conversion_inventory1_inventory1_quantity" class="oe_inline" colspan="6"/>
                        <field name="conversion_inventory1_inventory1_unit" class="oe_inline" colspan="6" readonly = "1"/>
                        <span>est égal à</span>
                        <field name="conversion_inventory1_reference_quantity"  class="oe_inline"/>
                        <field name="conversion_inventory1_reference_unit" readonly="1"/>
                    </div>
                    <newline/>
                    <div id="conversion_inventory2" class="o_row d-flex" name="conversion inventory2" attrs="{'invisible': [('reference_eq_inv2','=',True)]}">
                        <span>Conversion unité d'inventaire 2  : </span>
                        <field name="conversion_inventory2_inventory2_quantity" class="oe_inline" colspan="6"/>
                        <field name="conversion_inventory2_inventory2_unit" class="oe_inline" colspan="6" readonly = "1"/>
                        <span>est égal à</span>
                        <field name="conversion_inventory2_reference_quantity"  class="oe_inline"/>
                        <field name="conversion_inventory2_reference_unit" readonly="1"/>
                    </div>
                    <newline/>
                    <div id="conversion_inventory3" class="o_row d-flex" name="conversion inventory3" attrs="{'invisible': [('reference_eq_inv3','=',True)]}">
                        <span>Conversion unité d'inventaire 3  : </span>
                        <field name="conversion_inventory3_inventory3_quantity" class="oe_inline" colspan="6"/>
                        <field name="conversion_inventory3_inventory3_unit" class="oe_inline" colspan="6" readonly = "1"/>
                        <span>est égal à</span>
                        <field name="conversion_inventory3_reference_quantity"  class="oe_inline"/>
                        <field name="conversion_inventory3_reference_unit" readonly="1"/>
                    </div>

                </page>
            </notebook>
             <notebook position="inside">
                <page string="Achat">
                    <group>
                        <field name="purchase_price"/>
                        <field name="purchase_quantity"/>
                    </group>
                </page>
            </notebook>
             <notebook position="inside">
                <page string="Prix de revient">
                    <div id="foodcost" class="o_row d-flex" name="foodcost explication">
                            <field name="foodcost" readonly = "1" class="oe_inline" colspan="6"/>
                            <span> € pour un 1 </span>
                            <field name="foodcost_unit_reference" readonly = "1" class="oe_inline" colspan="6"/>
                    </div>
                </page>
            </notebook>
            <notebook position="inside">
                <page string="Calcul de besoin">
                    <group>        
                        <field name="gross_requirement" readonly = "1"/>
                        <field name="stock_quantity" />
                         <field name="net_requirement" readonly = "1"/>                
                        <field name="requirement_ids"/>
                    </group>
                </page>
            </notebook>
            
        </field>
    </record>
 
    <act_window id="action_all_receipe"
            name="Mes recettes"
            res_model="eatman.receipe"
            view_mode="tree,form"
            limit="80" />

    <act_window id="action_all_receipe_line"
            name="Ligne de recettes"
            res_model="eatman.receipe.line"
            view_mode="tree,form"
            limit="80" />
    <act_window id="action_all_product"
            name="Mes produits"
            res_model="product.template"
            view_mode="tree,form"
            limit="80" />

      
    <menuitem id="eatman_top"
        name="Foodcost" />
        <menuitem id="menu_all_receipe"

          parent="eatman_top"
          action="action_all_receipe"
          sequence="10"
          groups="" />

        <menuitem id="menu_all_receipe_line"
          parent="eatman_top"
          action="action_all_receipe_line"
          sequence="20"
          groups="" />
        <menuitem id="menu_all_product"
          parent="eatman_top"
          action="action_all_product"
          sequence="20"
          groups="" />

        <record id="form_all_receipe" model="ir.ui.view">
            <field name="name">Mes recettes</field>
            <field name="model">eatman.receipe</field>
            <field name="arch" type="xml">
                <form>
                    <group>
                        <field name ="name"/>   
                        <field name ="product_cooked"/>   
                        <field name ="receipe_quantity"/>
                        <field name ="receipe_uom"/>
                        <field name ="company_id"/>
                        <field name ="receipe_line_ids" string="Ligne de recette" >
                            <tree string="Ligne de recette"  editable="bottom">
                                <field name ="product_ingredient"/>
                                <field name ="ingredient_quantity"/>
                                <field name ="ingredient_uom"/>
                                <field name ="ingredient_lost_rate"/>
                            </tree>
                        </field>
                    </group>
                </form>
            </field>
        </record>
    </data>
</odoo>
